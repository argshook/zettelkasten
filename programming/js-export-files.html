<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="author" content="Arijus Å ukys <argshook@gmail.com>" />
    <meta name="date" content="2024-01-19" />
    <title>arij.us - programming/js-export-files</title>
    <link rel="stylesheet" href="https://arij.us/statics/style.css" />
    <link rel="canonical" href="https://arij.us/programming/js-export-files.md" />
  </head>
  <body data-slug="programming/js-export-files">
    <main>
      <header class="header">
        <a class="header-title" href="https://arij.us">
          <div class="page-title">arij.us</div>
          <div class="page-subtitle">Digital Garden</div>
        </a>

        <nav class="menu">
          <ul>
            <li><a href="https://arij.us">Home</a></li>
            <li><a href="https://arij.us/about.html">About</a></li>
            <li><a href="https://arij.us/projects.html">Projects</a></li>
          </ul>
        </nav>
      </header>

      <article class="article">
        <h1 class="article-title">JS Export Files</h1>
                <div class="last-modified">Last updated 2024-01-19</div>
        <p>I have a personal grudge against files like this:</p>
<pre><code>export * from &#39;./input&#39;
export * from &#39;./input-field&#39;
export * from &#39;./check-label&#39;
export * from &#39;./checkbox&#39;
export * from &#39;./dropdown&#39;
export * from &#39;./icons&#39;
export * from &#39;./loader&#39;
// ... And so on</code></pre>
<p>There are few reasons why this is suboptimal, one of which is name clashing.</p>
<p>For example <code>./input</code> file should be allowed to, say <code>export type Props</code> (instead of the verbose <code>export type InputProps</code>).</p>
<p>but then <code>index.ts</code> cannot do:</p>
<pre><code>export * from &#39;./input&#39;;
export * from &#39;./button&#39;;</code></pre>
<p>because both <code>input</code> and <code>button</code> might export <code>Props</code> type. so we have to choose. We can do:</p>
<p><code>button.tsx</code>:</p>
<pre><code>export type ButtonProps = { ... }
// instead of more preferable
// export type Props = { ... }</code></pre>
<p>or we need to juggle <code>index.ts</code> files to do:</p>
<pre><code>export { Input } from &#39;./input&#39;;
export type { Props as InputProps } from &#39;./input&#39;;</code></pre>
<p>but this is not very ergonomic. Ultimate solution is to have per-component exports:</p>
<pre><code>import { Input, Props } from &#39;@dhub/ui/input&#39;
// in case of name clash we can rename at use-site:
import { Button, Props as ButonProps } from &#39;@dhub/ui/button&#39;</code></pre>
<p>this way <code>index.ts</code> export file is not needed at all.</p>
<p>to achieve <code>@dhub/ui/input</code> path, we can leverage <code>package.json</code> <code>exports</code> field:</p>
<pre><code>{
  &quot;exports&quot;: {
    &quot;.&quot;: &quot;./dist/index.js&quot;,
    &quot;./input&quot;: &quot;./dist/input.js&quot;
  }
}</code></pre>
<p>this can be automated</p>
      </article>
    </main>
  </body>
</html>
